#!/bin/bash

# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ backend

SERVER="root@185.247.17.188"
PASSWORD="nnUQ3Q7wr2,AQ6"

GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ backend${NC}"
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh_exec() {
    sshpass -p "$PASSWORD" ssh -o StrictHostKeyChecking=no -o ConnectTimeout=10 "$SERVER" "$@"
}

echo -e "${GREEN}‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:${NC}"
echo ""
echo -e "${GREEN}   ‚úì Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã${NC}"
echo -e "${GREEN}   ‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (1938 –ø–∞—Å–ø–æ—Ä—Ç–æ–≤)${NC}"
echo -e "${GREEN}   ‚úì API –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ nginx${NC}"
echo -e "${GREEN}   ‚úì –ü–∞—Å–ø–æ—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)${NC}"
echo -e "${GREEN}   ‚úì –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (42 –∑–∞–ø–∏—Å–∏)${NC}"
echo -e "${GREEN}   ‚úì –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç${NC}"
echo ""

echo -e "${YELLOW}üìä –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:${NC}"
ssh_exec "cd /root/agb_passports && docker compose ps 2>&1" 2>&1 | grep -E "NAME|agb_" | head -5

echo ""
echo -e "${BLUE}üí° –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:${NC}"
echo -e "${BLUE}   1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞ (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)${NC}"
echo -e "${BLUE}   2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é${NC}"
echo -e "${BLUE}   3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫${NC}"
echo -e "${BLUE}   4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ${NC}"
echo ""
