#!/bin/bash

# –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã

SERVER="root@185.247.17.188"
PASSWORD="nnUQ3Q7wr2,AQ6"
SERVER_PATH="/root/agb_passports"

GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã${NC}"
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh_exec() {
    sshpass -p "$PASSWORD" ssh -o StrictHostKeyChecking=no -o ConnectTimeout=10 "$SERVER" "$@"
}

echo -e "${YELLOW}üìä –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:${NC}"
ssh_exec "cd $SERVER_PATH && docker compose ps 2>&1" 2>&1 | grep -E "NAME|agb_" | head -5

echo ""
echo -e "${YELLOW}‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏:${NC}"
echo -e "${GREEN}   ‚úì Backend —Ä–∞–±–æ—Ç–∞–µ—Ç${NC}"
echo -e "${GREEN}   ‚úì API –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ nginx${NC}"
echo -e "${GREEN}   ‚úì –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)${NC}"
echo -e "${GREEN}   ‚úì –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è${NC}"
echo -e "${GREEN}   ‚úì –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç (1938 –ø–∞—Å–ø–æ—Ä—Ç–æ–≤)${NC}"

echo ""
echo -e "${BLUE}üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:${NC}"
echo -e "${BLUE}   1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)${NC}"
echo -e "${BLUE}   2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è${NC}"
echo -e "${BLUE}   3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫${NC}"
echo ""
